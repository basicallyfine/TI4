(this["webpackJsonpti4-reference"]=this["webpackJsonpti4-reference"]||[]).push([[0],{425:function(e,t,n){},431:function(e,t,n){},432:function(e,t,n){},435:function(e,t,n){},436:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(117),r=n.n(s),l=n(10),i=n.n(l),o=n(71),u=n(247),d=n(18),b=n(35),m=n(228),h=n(30),j=(n(229),n(7)),p=n(9),f=function(){function e(){Object(j.a)(this,e);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];this.dice=n.map((function(e){var t=parseFloat(e,10);return 0===t&&(t=10),t}))}return Object(p.a)(e,[{key:"results",get:function(){if(this._results||this.calculate(),this.textOutput){var e=[];for(var t in this._results)e.push("".concat(t,": ").concat(Math.round(100*this._results[t]),"%"));return e.join("\n")}return this._results}},{key:"cumulative",get:function(){if(this._cumulative||this.calculate(),this.textOutput){var e=[];for(var t in this._cumulative)e.push(">= ".concat(t,": ").concat(Math.round(100*this._cumulative[t]),"%"));return e.join("\n")}return this._cumulative}},{key:"average",get:function(){var e=0;for(var t in this._results)e+=parseInt(t,10)*this._results[t];return e}},{key:"format",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.textOutput=e,this}},{key:"calculate",value:function(){var e=this;this._results={},this._cumulative={};this.dice.map((function(e){return(11-e)/10}));for(var t=function(t){var n=t.toString(2).padStart(e.dice.length,"0"),a=n.replace(/0/g,"").length,c=e.dice.reduce((function(e,t,a){return e*("1"===n[a]?(11-t)/10:1-(11-t)/10)}),1);e._results[a.toString(10)]||(e._results[a.toString(10)]=0),e._results[a.toString(10)]+=c},n=0;n<Math.pow(2,this.dice.length);n+=1)t(n);for(var a=this.dice.length;a>=0;a-=1)this._cumulative[a.toString(10)]=this._results[a.toString(10)],this._cumulative[(a+1).toString(10)]?this._cumulative[a.toString(10)]+=this._cumulative[(a+1).toString(10)]:this._cumulative[a.toString(10)]=this._results[a.toString(10)];return this}}]),e}(),O="#FFFFFF",_="#1B91FF",v="#00BE4C",y="#FFE600",x="#FF9922",g="#FF4A31",A="#FF5FDC",P="BLUE SYSTEM",M="RED SYSTEM",k="Warfare",E="Propulsion",N="Biotic",w="Cybernetic",S="Cultural",C="Hazardous",I="Industrial",L="Supernova",T="Asteroid Field",B="Nebula",z="Gravity Rift",R="\u03b1 Wormhole",D="\u03b2 Wormhole",F=[{number:18,back:"SPECIAL",planets:[{name:"Mecatol Rex",trait:null,tech:null,legendary:!1,resources:1,influence:6,mecatol:!0}]},{number:61,back:P,pok:!0,planets:[{name:"Ang",trait:I,tech:k,legendary:!1,resources:2,influence:0}],_vm_tier:3},{number:22,back:P,planets:[{name:"Tar\u2019Mann",trait:I,tech:N,legendary:!1,resources:1,influence:1}],_vm_tier:3},{number:43,back:M,anomaly:L,planets:[]},{number:64,back:P,pok:!0,wormhole:D,planets:[{name:"Atlas",trait:C,tech:null,legendary:!1,resources:3,influence:1}],_vm_tier:2},{number:79,back:M,pok:!0,anomaly:T,wormhole:R,planets:[]},{number:19,back:P,planets:[{name:"Wellon",trait:I,tech:w,legendary:!1,resources:1,influence:2}],_vm_tier:3},{number:34,back:P,planets:[{name:"Centauri",trait:S,tech:null,legendary:!1,resources:1,influence:3},{name:"Gral",trait:I,tech:E,legendary:!1,resources:1,influence:1}],_vm_tier:2},{number:75,back:P,pok:!0,planets:[{name:"Ashtroth",trait:C,tech:null,legendary:!1,resources:2,influence:0},{name:"Abaddon",trait:S,tech:null,legendary:!1,resources:1,influence:0},{name:"Loki",trait:S,tech:null,legendary:!1,resources:1,influence:2}],_vm_tier:1},{number:69,back:P,pok:!0,planets:[{name:"Accoen",trait:I,tech:null,legendary:!1,resources:2,influence:3},{name:"Jeol Ir",trait:I,tech:null,legendary:!1,resources:2,influence:3}],_vm_tier:1},{number:20,back:P,planets:[{name:"Vefut II",trait:C,tech:null,legendary:!1,resources:2,influence:2}],_vm_tier:3},{number:59,back:P,pok:!0,planets:[{name:"Archon Vail",trait:C,tech:E,legendary:!1,resources:1,influence:3}],_vm_tier:3},{number:73,back:P,pok:!0,planets:[{name:"Cealdri",trait:S,tech:w,legendary:!1,resources:0,influence:2},{name:"Xanhact",trait:C,tech:null,legendary:!1,resources:0,influence:1}],_vm_tier:3},{number:66,back:P,pok:!0,planets:[{name:"Hope\u2019s End",trait:C,tech:null,legendary:!0,resources:3,influence:0}],_vm_tier:2},{number:70,back:P,pok:!0,planets:[{name:"Kraag",trait:C,tech:null,legendary:!1,resources:2,influence:1},{name:"Siig",trait:C,tech:null,legendary:!1,resources:0,influence:2}],_vm_tier:2},{number:37,back:P,planets:[{name:"Arinam",trait:I,tech:null,legendary:!1,resources:1,influence:2},{name:"Meer",trait:C,tech:k,legendary:!1,resources:0,influence:4}],_vm_tier:1},{number:27,back:P,planets:[{name:"New Albion",trait:I,tech:N,legendary:!1,resources:1,influence:1},{name:"Starpoint",trait:C,tech:null,legendary:!1,resources:3,influence:1}],_vm_tier:1},{number:42,back:M,anomaly:B,planets:[]},{number:78,back:M,pok:!0,planets:[]},{number:50,back:M,planets:[]},{number:49,back:M,planets:[]},{number:76,back:P,pok:!0,planets:[{name:"Rigel I",trait:C,tech:null,legendary:!1,resources:0,influence:1},{name:"Rigel II",trait:I,tech:null,legendary:!1,resources:1,influence:2},{name:"Rigel III",trait:I,tech:N,legendary:!1,resources:1,influence:1}],_vm_tier:2},{number:60,back:P,pok:!0,planets:[{name:"Perimeter",trait:I,tech:null,legendary:!1,resources:2,influence:1}],_vm_tier:3},{number:24,back:P,planets:[{name:"Mehar Xull",trait:C,tech:k,legendary:!1,resources:1,influence:3}],_vm_tier:3},{number:31,back:P,planets:[{name:"Lazar",trait:I,tech:w,legendary:!1,resources:1,influence:0},{name:"Sakulag",trait:C,tech:null,legendary:!1,resources:2,influence:1}],_vm_tier:3},{number:32,back:P,planets:[{name:"Dal Bootha",trait:S,tech:null,legendary:!1,resources:0,influence:2},{name:"Xxehan",trait:S,tech:null,legendary:!1,resources:1,influence:1}],_vm_tier:3},{number:36,back:P,planets:[{name:"Arnor",trait:I,tech:null,legendary:!1,resources:2,influence:1},{name:"Lor",trait:I,tech:null,legendary:!1,resources:1,influence:2}],_vm_tier:3},{number:71,back:P,pok:!0,planets:[{name:"Alio Prima",trait:S,tech:null,legendary:!1,resources:1,influence:1},{name:"Ba\u2019kal",trait:I,tech:null,legendary:!1,resources:3,influence:2}],_vm_tier:2},{number:80,back:M,pok:!0,anomaly:L,planets:[]},{number:38,back:P,planets:[{name:"Abyz",trait:C,tech:null,legendary:!1,resources:3,influence:0},{name:"Fria",trait:C,tech:null,legendary:!1,resources:2,influence:0}],_vm_tier:1},{number:74,back:P,pok:!0,planets:[{name:"Vega Major",trait:S,tech:null,legendary:!1,resources:2,influence:1},{name:"Vega Minor",trait:S,tech:E,legendary:!1,resources:1,influence:2}],_vm_tier:2},{number:63,back:P,pok:!0,planets:[{name:"Vorhal",trait:S,tech:N,legendary:!1,resources:0,influence:2}],_vm_tier:3},{number:23,back:P,planets:[{name:"Saudor",trait:I,tech:null,legendary:!1,resources:2,influence:2}],_vm_tier:3},{number:41,back:M,anomaly:z,planets:[]},{number:72,back:P,pok:!0,planets:[{name:"Lisis",trait:I,tech:null,legendary:!1,resources:2,influence:2},{name:"Velnor",trait:I,tech:k,legendary:!1,resources:2,influence:1}],_vm_tier:1},{number:29,back:P,planets:[{name:"Qucen\u2019n",trait:I,tech:null,legendary:!1,resources:1,influence:2},{name:"Rarron",trait:S,tech:null,legendary:!1,resources:0,influence:3}],_vm_tier:2},{number:48,back:M,planets:[]},{number:28,back:P,planets:[{name:"Tequ\u2019ran",trait:C,tech:null,legendary:!1,resources:2,influence:0},{name:"Torkan",trait:S,tech:null,legendary:!1,resources:0,influence:3}],_vm_tier:1},{number:47,back:M,planets:[]},{number:40,back:M,wormhole:D,planets:[]},{number:68,back:M,pok:!0,anomaly:B,planets:[{name:"Everra",trait:S,tech:null,legendary:!1,resources:3,influence:1}]},{number:39,back:M,wormhole:R,planets:[]},{number:21,back:P,planets:[{name:"Thibah",trait:I,tech:E,legendary:!1,resources:1,influence:1}],_vm_tier:3},{number:26,back:P,wormhole:R,planets:[{name:"Lodor",trait:S,tech:null,legendary:!1,resources:3,influence:1}],_vm_tier:2},{number:44,back:M,anomaly:T,planets:[]},{number:46,back:M,planets:[]},{number:65,back:P,pok:!0,planets:[{name:"Primor",trait:S,tech:null,legendary:!0,resources:2,influence:1}],_vm_tier:2},{number:45,back:M,anomaly:T,planets:[]},{number:25,back:P,wormhole:D,planets:[{name:"Quann",trait:S,tech:null,legendary:!1,resources:2,influence:1}],_vm_tier:3},{number:77,back:M,pok:!0,planets:[]},{number:35,back:P,planets:[{name:"Bereg",trait:C,tech:null,legendary:!1,resources:3,influence:1},{name:"Lirta IV",trait:C,tech:null,legendary:!1,resources:2,influence:3}],_vm_tier:1},{number:30,back:P,planets:[{name:"Mellon",trait:S,tech:null,legendary:!1,resources:0,influence:2},{name:"Zohbat",trait:C,tech:null,legendary:!1,resources:3,influence:1}],_vm_tier:2},{number:67,back:M,pok:!0,anomaly:z,planets:[{name:"Cormund",trait:C,tech:null,legendary:!1,resources:2,influence:0}]},{number:33,back:P,planets:[{name:"Corneeq",trait:S,tech:null,legendary:!1,resources:1,influence:2},{name:"Resculon",trait:S,tech:null,legendary:!1,resources:2,influence:0}],_vm_tier:2},{number:62,back:P,pok:!0,planets:[{name:"Sem-Lore",trait:S,tech:w,legendary:!1,resources:3,influence:2}],_vm_tier:2}],Y=(n(425),n(3)),q="AT_LEAST",U="EXACT",H={};function W(e){return H[e]||(H[e]=Object(m.a)(f,Object(h.a)(e.split(""))).calculate()),H[e]}function G(e){if(void 0===e)return"-";var t=Math.round(100*e);return 100===t&&(e<1&&(t=">99"),e>1&&(t="100")),"".concat(t,"%")}function J(e,t,n){var a=e.map((function(e,a){return e+(t[a]-e)*n}));return"rgba(".concat(a.join(","),")")}var V,X=function(e){return e.split("").sort().join("").replace(/([0-9])(?!\1+)/g,"$& ").replace(/[^\d]+$/,"")},K=function(){var e=Object(a.useState)(q),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)([]),r=Object(d.a)(s,2),l=r[0],o=r[1],u=Object(a.useState)(null),b=Object(d.a)(u,2),m=b[0],h=b[1];Object(a.useEffect)((function(){o([])}),[]);var j=n===U?"exactly":"at least",p=i.a.chain(l).map("length").max().value(),f={min:1/0,max:-1/0},O=[],_=i.a.chain(l).filter().uniqBy(X).map((function(e,t){for(var a=W(e)[n===U?"results":"cumulative"],c=[],s=n===U?0:1;s<=p;s+=1){var r=a[s.toString(10)];r>f.max&&(f.max=r),r<f.min&&(f.min=r),c.push(r),0===t&&O.push(s)}return{key:t,dice:e,cols:c,average:W(e).average}})).value();return Object(Y.jsxs)("div",{className:"container dice-table my-2",children:[Object(Y.jsx)("h2",{children:"Dice probability calculator"}),Object(Y.jsx)("p",{children:"Enter combat values below to see the probability of producing different numbers of hits."}),Object(Y.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.querySelector("input:focus");t&&t.blur(),o(l.filter((function(e){return!!e.replace(/[^\d]/g,"")})))},className:"d-flex flex-wrap mt-2 mb-2",children:[l.map((function(e,t){return Object(Y.jsxs)("div",{className:"dice-input input-group input-group-sm flex-nowrap flex-grow-0 flex-shrink-1 mb-0-5 mr-0-5 w-auto",children:[Object(Y.jsx)("input",{type:"text",inputMode:"numeric",className:"form-control flex-grow-0 flex-shrink-0",value:e,placeholder:"...",style:{width:"".concat(.6*Math.max(3,e.length)+1.35,"em")},autoFocus:t===m,onChange:function(e){var n=i.a.clone(l);n[t]=e.target.value.replace(/[^\d]/g,""),o(n)},onBlur:function(){h(null)},onFocus:function(){h(t)}}),Object(Y.jsx)("div",{className:"input-group-append",children:Object(Y.jsx)("button",{className:"btn btn-sm btn-outline-dark",type:"button",tabIndex:"-1",onClick:function(){var e=i.a.clone(l);e.splice(t,1),o(e)},children:"\xd7"})})]},t)})),Object(Y.jsx)("button",{className:"btn btn-sm btn-secondary mb-0-5",type:"button",onClick:function(){var e=i.a.clone(l);e.push(""),o(e),h(e.length-1)},children:"+ Add values"}),Object(Y.jsx)("input",{type:"submit",style:{position:"fixed",left:"100%",top:"-100%"}})]}),null!==m&&0===l.filter((function(e){return e})).length&&Object(Y.jsx)("p",{className:"mt-n2 text-muted",children:Object(Y.jsxs)("small",{children:['Combat values, eg "',Object(Y.jsx)("u",{children:"688"}),'". Enter ',Object(Y.jsx)("u",{children:"0"})," for 10."]})}),_.length>0?Object(Y.jsxs)("div",{className:"results-table",children:[Object(Y.jsx)("p",{children:Object(Y.jsxs)("strong",{children:["Probability of ",Object(Y.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),c(n===q?U:q)},children:j})," X hits"]})}),Object(Y.jsx)("div",{className:"table-responsive",children:Object(Y.jsxs)("table",{className:"table",children:[Object(Y.jsx)("thead",{children:Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("th",{scope:"col"}),O.map((function(e){return Object(Y.jsx)("th",{scope:"col",className:"text-center",children:e},e)})),Object(Y.jsx)("th",{children:"Avg. hits"})]})}),Object(Y.jsx)("tbody",{children:_.map((function(e,t){var n=e.dice,a=e.cols,c=e.average;return Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("th",{scope:"col",children:X(n)}),a.map((function(e,t){return Object(Y.jsx)("td",{className:"text-center",style:{backgroundColor:"number"===typeof e?J([20,20,50],[255,40,220],(e-f.min)/(f.max-f.min)):"transparent"},children:G(e)},t)})),Object(Y.jsx)("td",{className:"text-right",children:(Math.round(10*c)/10).toFixed(1)})]},X(n))}))})]})})]}):null]})},Q=n(20),$=n(21),Z=n(464),ee=n(246),te={parseJSON:function(e){try{return JSON.parse(e)}catch(t){return void console.error(t)}}},ne=te,ae={MAP_00:"MAP_00",MAP_01:"MAP_01",MAP_02:"MAP_02",MAP_03:"MAP_03",MAP_04:"MAP_04",MAP_05:"MAP_05",MAP_06:"MAP_06",MAP_07:"MAP_07",MAP_08:"MAP_08",MAP_09:"MAP_09",MAP_10:"MAP_10",MAP_11:"MAP_11",MAP_12:"MAP_12",MAP_13:"MAP_13",MAP_14:"MAP_14",MAP_15:"MAP_15",MAP_16:"MAP_16",MAP_17:"MAP_17",MAP_18:"MAP_18",MAP_19:"MAP_19",MAP_20:"MAP_20",MAP_21:"MAP_21",MAP_22:"MAP_22",MAP_23:"MAP_23",MAP_24:"MAP_24",MAP_25:"MAP_25",MAP_26:"MAP_26",MAP_27:"MAP_27",MAP_28:"MAP_28",MAP_29:"MAP_29",MAP_30:"MAP_30",MAP_31:"MAP_31",MAP_32:"MAP_32",MAP_33:"MAP_33",MAP_34:"MAP_34",MAP_35:"MAP_35",MAP_36:"MAP_36"},ce={MAP_00:{left:"50.0%",top:"50.0%",zIndex:199},MAP_01:{left:"50.0%",top:"35.7%",zIndex:198},MAP_02:{left:"63.6%",top:"42.9%",zIndex:197},MAP_03:{left:"63.6%",top:"57.1%",zIndex:196},MAP_04:{left:"50.0%",top:"64.3%",zIndex:195},MAP_05:{left:"36.4%",top:"57.1%",zIndex:194},MAP_06:{left:"36.4%",top:"42.9%",zIndex:193},MAP_07:{left:"50.0%",top:"21.4%",zIndex:192},MAP_08:{left:"63.6%",top:"28.6%",zIndex:191},MAP_09:{left:"77.3%",top:"35.7%",zIndex:190},MAP_10:{left:"77.3%",top:"50.0%",zIndex:189},MAP_11:{left:"77.3%",top:"64.3%",zIndex:188},MAP_12:{left:"63.6%",top:"71.4%",zIndex:187},MAP_13:{left:"50.0%",top:"78.6%",zIndex:186},MAP_14:{left:"36.4%",top:"71.4%",zIndex:185},MAP_15:{left:"22.7%",top:"64.3%",zIndex:184},MAP_16:{left:"22.7%",top:"50.0%",zIndex:183},MAP_17:{left:"22.7%",top:"35.7%",zIndex:182},MAP_18:{left:"36.4%",top:"28.6%",zIndex:181},MAP_19:{left:"50.0%",top:"7.1%",zIndex:180},MAP_20:{left:"63.6%",top:"14.3%",zIndex:179},MAP_21:{left:"77.3%",top:"21.4%",zIndex:178},MAP_22:{left:"90.9%",top:"28.6%",zIndex:177},MAP_23:{left:"90.9%",top:"42.9%",zIndex:176},MAP_24:{left:"90.9%",top:"57.1%",zIndex:175},MAP_25:{left:"90.9%",top:"71.4%",zIndex:174},MAP_26:{left:"77.3%",top:"78.6%",zIndex:173},MAP_27:{left:"63.6%",top:"85.7%",zIndex:172},MAP_28:{left:"50.0%",top:"92.9%",zIndex:171},MAP_29:{left:"36.4%",top:"85.7%",zIndex:170},MAP_30:{left:"22.7%",top:"78.6%",zIndex:169},MAP_31:{left:"9.1%",top:"71.4%",zIndex:168},MAP_32:{left:"9.1%",top:"57.1%",zIndex:167},MAP_33:{left:"9.1%",top:"42.9%",zIndex:166},MAP_34:{left:"9.1%",top:"28.6%",zIndex:165},MAP_35:{left:"22.7%",top:"21.4%",zIndex:164},MAP_36:{left:"36.4%",top:"14.3%",zIndex:163}},se="".concat("https://s3-ap-southeast-2.amazonaws.com/com.basicallyfine.public-assets/","ti4/map/systems/png/"),re={THREE_PLAYER:"P3",FOUR_PLAYER:"P4"},le=(V={},Object(Q.a)(V,re.THREE_PLAYER,{name:"Three player",systems:{blue:18,red:6},players:[{label:"A",position:{hs:ae.MAP_34,adjacent:[ae.MAP_35,ae.MAP_17,ae.MAP_33],slice:[ae.MAP_35,ae.MAP_17,ae.MAP_33,ae.MAP_18,ae.MAP_06,ae.MAP_16],equidistant:[ae.MAP_07,ae.MAP_01,ae.MAP_05,ae.MAP_15]}},{label:"B",position:{hs:ae.MAP_22,adjacent:[ae.MAP_21,ae.MAP_09,ae.MAP_23],slice:[ae.MAP_21,ae.MAP_09,ae.MAP_23,ae.MAP_08,ae.MAP_02,ae.MAP_10],equidistant:[ae.MAP_07,ae.MAP_01,ae.MAP_03,ae.MAP_11]}},{label:"C",position:{hs:ae.MAP_28,adjacent:[ae.MAP_29,ae.MAP_13,ae.MAP_27],slice:[ae.MAP_29,ae.MAP_13,ae.MAP_27,ae.MAP_14,ae.MAP_04,ae.MAP_12],equidistant:[ae.MAP_05,ae.MAP_15,ae.MAP_03,ae.MAP_11]}}]}),Object(Q.a)(V,re.FOUR_PLAYER,{name:"Four player",systems:{blue:20,red:12},players:[{label:"A",position:{hs:ae.MAP_36,adjacent:[ae.MAP_35,ae.MAP_18,ae.MAP_07,ae.MAP_19],slice:[ae.MAP_35,ae.MAP_18,ae.MAP_07,ae.MAP_19,ae.MAP_20,ae.MAP_01],equidistant:[ae.MAP_08,ae.MAP_34,ae.MAP_17,ae.MAP_06]}},{label:"B",position:{hs:ae.MAP_23,adjacent:[ae.MAP_22,ae.MAP_09,ae.MAP_10,ae.MAP_24],slice:[ae.MAP_22,ae.MAP_09,ae.MAP_10,ae.MAP_24,ae.MAP_21,ae.MAP_02],equidistant:[ae.MAP_08,ae.MAP_03,ae.MAP_11,ae.MAP_25]}},{label:"C",position:{hs:ae.MAP_27,adjacent:[ae.MAP_28,ae.MAP_13,ae.MAP_12,ae.MAP_26],slice:[ae.MAP_28,ae.MAP_13,ae.MAP_12,ae.MAP_26,ae.MAP_29,ae.MAP_04],equidistant:[ae.MAP_14,ae.MAP_03,ae.MAP_11,ae.MAP_25]}},{label:"D",position:{hs:ae.MAP_32,adjacent:[ae.MAP_33,ae.MAP_16,ae.MAP_15,ae.MAP_31],slice:[ae.MAP_33,ae.MAP_16,ae.MAP_15,ae.MAP_31,ae.MAP_05,ae.MAP_30],equidistant:[ae.MAP_14,ae.MAP_34,ae.MAP_17,ae.MAP_06]}}]}),Object(Q.a)(V,re.SIX_PLAYER,{name:"Six player",systems:{blue:18,red:12},players:[{label:"A",position:{hs:null,adjacent:[],slice:[],equidistant:[]}},{label:"B",position:{hs:null,adjacent:[],slice:[],equidistant:[]}},{label:"C",position:{hs:null,adjacent:[],slice:[],equidistant:[]}},{label:"D",position:{hs:null,adjacent:[],slice:[],equidistant:[]}},{label:"E",position:{hs:null,adjacent:[],slice:[],equidistant:[]}},{label:"F",position:{hs:null,adjacent:[],slice:[],equidistant:[]}}]}),V),ie="text",oe="image",ue="svg",de=n(468),be=n(467),me=function(e){var t=e.children;return Object(Y.jsxs)("div",{className:"svg-wrapper",children:[Object(Y.jsx)("svg",{xmlns:"http://www.w3.org/1999/xlink",viewBox:"0 0 515 446",className:"system-image svg-border",children:Object(Y.jsx)("path",{d:"m 0 223 l 128.75 -223 l 257.5 0 l 128.75 223 l -128.75 223 l -257.5 0 z "})}),t]})},he=n(32),je=n.n(he),pe=n(240),fe=n(241),Oe=n.n(fe),_e=(n(227),n(34)),ve=["key"],ye=["planet","size"],xe=238,ge=Math.round(.866025*xe),Ae=2.38,Pe={WHITE:O,BLACK:"#000000",RED:g,GREEN:v,BLUE:_,YELLOW:y,ORANGE:x,PINK:A,GREY:"#C0C0C0"},Me="PLANET",ke="ANOMALY",Ee="WORMHOLE",Ne=36.89,we=54.74,Se=4.76,Ce=[9.52,9.52],Ie={BASE:{fontFamily:"Roboto Mono",fontStyle:"bold",fill:Pe.WHITE,align:"center",verticalAlign:"middle",lineHeight:1.1},OBJECT_LABEL:{fontSize:11.305},SYSTEM_LABEL:{fontSize:11.305},PLANET_VALUES:{fontSize:9*Ae}},Le=function(e){var t=e.key,n=Object(b.a)(e,ve),c=Object(a.useState)(!1),s=Object(d.a)(c,2),r=s[0],l=s[1];return Object(a.useEffect)(Object(pe.a)(je.a.mark((function e(){var t;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Oe.a("Roboto Mono",{weight:700}),e.next=3,t.load().catch((function(){console.log("font failed failed to load")}));case 3:l(!0);case 4:case"end":return e.stop()}}),e)}))),[]),r?Object(Y.jsx)(_e.g,Object($.a)({},n),t):null},Te=function(){var e=.09*xe,t=function(t){return Object(Y.jsx)(_e.d,{points:[0,-1*e,12.363624,0,0,e],stroke:Pe.RED,closed:!1,strokeWidth:4.76,x:119,y:ge/2,offsetX:-93.058,rotation:t})};return Object(Y.jsxs)(_e.b,{children:[t(-120),t(-60),t(0),t(60),t(120)]})},Be=function(e){var t=e.planet,n=e.size,a=Object(b.a)(e,ye);if(!t)return console.error("No planet",undefined),null;if(t.legendary)return Object(Y.jsx)(_e.f,Object($.a)({numPoints:5,fill:Pe.GREY,offsetY:.7*n,outerRadius:.7*n,innerRadius:.35*n},a));var c=Object($.a)({width:n,height:n,offsetY:.5*n},a);switch(t.tech){case N:c.fill=Pe.GREEN;break;case w:c.fill=Pe.YELLOW;break;case E:c.fill=Pe.BLUE;break;case k:c.fill=Pe.RED;break;default:return null}return Object(Y.jsx)(_e.a,Object($.a)({},c))},ze=function(e){var t=e.position,n=e.planet,a={radius:n.mecatol||n.legendary?we:Ne,stroke:Pe.WHITE,strokeWidth:Se},c=Object($.a)(Object($.a)(Object($.a)({},Ie.BASE),Ie.OBJECT_LABEL),{},{text:n.name.toUpperCase(),x:0,y:0}),s=2*a.strokeWidth-.1*c.fontSize,r=2.2*a.strokeWidth;switch(t){case"2,0":c.width=57.12,c.height=.2*ge,c.x=a.radius+r,c.offsetY=.5*c.height,c.verticalAlign="middle",c.align="left";break;case"2,1":c.width=64.26,c.height=.2*ge,c.offsetX=c.width,c.x=-1*(a.radius+r),c.offsetY=.5*c.height,c.verticalAlign="middle",c.align="right";break;case"3,0":c.width=57.12,c.height=.2*ge,c.x=a.radius+r,c.offsetY=.8*c.height,c.verticalAlign="middle",c.align="left";break;case"3,1":c.width=119,c.height=c.fontSize*c.lineHeight,c.offsetX=c.width,c.x=-1*(a.radius+r),c.offsetY=.5*c.height,c.verticalAlign="middle",c.align="right";break;case"3,2":c.width=57.12,c.height=.2*ge,c.x=a.radius+r,c.offsetY=.2*c.height,c.verticalAlign="middle",c.align="left";break;default:c.width=119,c.height=c.fontSize*c.lineHeight,c.offsetX=.5*c.width,c.offsetY=c.height,c.y=-1*a.radius-s,c.verticalAlign="bottom"}switch(n.trait){case S:a.stroke=Pe.BLUE,c.fill=Pe.BLUE;break;case C:a.stroke=Pe.RED,c.fill=Pe.RED;break;case I:a.stroke=Pe.GREEN,c.fill=Pe.GREEN}var l=Object($.a)(Object($.a)(Object($.a)({},Ie.BASE),Ie.PLANET_VALUES),{},{text:"".concat(n.resources,"/").concat(n.influence),width:2*a.radius}),i=.5*l.fontSize,o=n.tech||n.legendary?Object(Y.jsx)(Be,{planet:n,y:-.8*i,size:14.28}):null;return l.height=l.fontSize*l.lineHeight,l.offsetX=.5*l.width,l.offsetY=.5*l.height,o&&(l.y=7.14+.3*i),Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(_e.a,Object($.a)({},a)),o,Object(Y.jsx)(Le,Object($.a)({},l)),Object(Y.jsx)(Le,Object($.a)({},c))]})},Re=function(e){var t=e.type,n=function(e){return{width:1.8*e,height:1.8*e,offsetX:.9*e,offsetY:.9*e}};switch(t){case L:return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(_e.a,{radius:we,fill:Pe.ORANGE}),Object(Y.jsx)(Le,Object($.a)(Object($.a)(Object($.a)({},Ie.BASE),Ie.OBJECT_LABEL),{},{text:t.toUpperCase(),fill:Pe.BLACK},n(we)))]});case T:return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(_e.a,{radius:Ne,stroke:Pe.GREY,strokeWidth:Se,dash:Ce}),Object(Y.jsx)(Le,Object($.a)(Object($.a)(Object($.a)({},Ie.BASE),Ie.OBJECT_LABEL),{},{text:t.toUpperCase(),fill:Pe.GREY},n(Ne)))]});case B:return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(_e.a,{radius:Ne,stroke:Pe.PINK,strokeWidth:Se,dash:Ce}),Object(Y.jsx)(Le,Object($.a)(Object($.a)(Object($.a)({},Ie.BASE),Ie.OBJECT_LABEL),{},{text:t.toUpperCase(),fill:Pe.PINK},n(Ne)))]});case z:return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(_e.a,{radius:Ne,fill:Pe.GREY}),Object(Y.jsx)(Le,Object($.a)(Object($.a)(Object($.a)({},Ie.BASE),Ie.OBJECT_LABEL),{},{text:t.toUpperCase(),fill:Pe.BLACK},n(Ne)))]});default:return null}},De=function(e){var t={};switch(e.type){case R:t.color=Pe.ORANGE,t.text="\u03b1";break;case D:t.color=Pe.GREEN,t.text="\u03b2";break;default:return null}return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(_e.a,{radius:Ne,stroke:t.color,strokeWidth:Se,dash:Ce}),Object(Y.jsx)(Le,Object($.a)(Object($.a)({},Ie.BASE),{},{fontFamily:"sans-serif",text:t.text,fill:t.color,fontSize:29.512,width:73.78,height:73.78,offsetX:Ne,offsetY:Ne}))]})},Fe=function(e){var t=e.position,n=e.type,a=e.object;switch(n){case Me:return Object(Y.jsx)(ze,{planet:a,position:t});case ke:return Object(Y.jsx)(Re,{type:a});case Ee:return Object(Y.jsx)(De,{type:a})}},Ye=function(e){var t=e.system,n=[];return i.a.get(t,"planets.length")>=1&&n.push.apply(n,Object(h.a)(t.planets.map((function(e){return[Me,e]})))),t.anomaly&&n.push([ke,t.anomaly]),t.wormhole&&n.push([Ee,t.wormhole]),n.map((function(e,t){var a=Object(d.a)(e,2),c=a[0],s=a[1],r="".concat(n.length,",").concat(t),l={};switch(r){case"2,0":l.x=95.2,l.y=.29*ge;break;case"2,1":l.x=.6*xe,l.y=.7*ge;break;case"3,0":l.x=.39*xe,l.y=.26*ge;break;case"3,1":l.x=176.12,l.y=.5*ge;break;case"3,2":l.x=.39*xe,l.y=.74*ge;break;default:l.x=119,l.y=ge/2}return Object(Y.jsx)(_e.b,Object($.a)(Object($.a)({},l),{},{children:Object(Y.jsx)(Fe,{position:r,type:c,object:s})}),t)}))},qe=function(e){var t=e.system,n=Object($.a)(Object($.a)(Object($.a)({},Ie.BASE),Ie.SYSTEM_LABEL),{},{text:t.number,x:119,y:.5*ge,width:204.68,align:"left"});switch(n.height=2*n.fontSize,n.offsetX=n.width/2,n.offsetY=n.height/2,t.back){case M:n.fill=Pe.RED;break;case P:n.fill=Pe.BLUE;break;default:n.fill=Pe.GREY}return Object(Y.jsx)(_e.g,Object($.a)({},n))},Ue=function(e){var t=e.system;return Object(Y.jsx)(_e.e,{width:xe,height:ge,children:Object(Y.jsxs)(_e.c,{children:[t.anomaly?Object(Y.jsx)(Te,{}):null,Object(Y.jsx)(qe,{system:t}),Object(Y.jsx)(Ye,{system:t})]})})},He=Object(a.memo)(Ue,(function(e,t){return i.a.isEqual(i.a.get(e,"system.number"),i.a.get(t,"system.number"))})),We=["system","style","contentType","locked","toggleLocked"],Ge=function(e){var t=e.number,n=e.type,a=i.a.find(F,{number:t});return a?n===ie?Object(Y.jsx)("span",{className:"tile-label",children:t}):n===oe?Object(Y.jsx)("img",{src:"".concat(se).concat(t,".png"),alt:"System ".concat(t),className:"system-image",draggable:!1}):Object(Y.jsx)(me,{children:Object(Y.jsx)(He,{system:a})}):null},Je=function(e){var t=e.system,n=e.style,a=void 0===n?{}:n,c=e.contentType,s=e.locked,r=e.toggleLocked,l=Object(b.a)(e,We),i=Object(be.a)((function(){return{type:"TILE",item:{system:t},canDrag:function(){return!s},collect:function(e){return{isDragging:e.isDragging()}}}}),[t,s,l.place]),o=Object(d.a)(i,2),u=o[0],m=o[1],h=["system-tile"];return c&&h.push("content-".concat(c)),u.isDragging&&h.push("is-dragging"),s&&h.push("locked"),Object(Y.jsx)("div",{className:h.join(" "),style:a,ref:m,onDoubleClick:r||null,role:"button",children:Object(Y.jsx)(Ge,{number:t,type:c})})},Ve=function(e){var t=e.type,n=e.player;return t===ie?null:t===oe?Object(Y.jsx)("img",{src:"".concat(se,"HS-").concat(n,".png"),alt:"Home system",className:"system-image",draggable:!1}):Object(Y.jsx)(me,{})},Xe=function(e){var t=e.player,n=e.style,a=void 0===n?{}:n,c=e.contentType;return Object(Y.jsxs)("div",{className:"system-tile locked home-system content-".concat(c),style:a,children:[Object(Y.jsx)(Ve,{type:c,player:t}),Object(Y.jsx)("span",{className:"tile-label",children:t})]})},Ke=["place","system","playerHome","contentType","moveTile","locked","unavailable","toggleLockedPlace"],Qe=function(e){var t=e.place,n=i.a.get(ce,t);return{left:i.a.get(n,"left")||null,top:i.a.get(n,"top")||null,zIndex:i.a.get(n,"zIndex")||null}},$e=function(e){var t=e.place,n=e.system,a=void 0===n?null:n,c=e.playerHome,s=void 0===c?null:c,r=e.contentType,l=e.moveTile,i=e.locked,o=e.unavailable,u=e.toggleLockedPlace,m=(Object(b.a)(e,Ke),Object(de.a)({accept:"TILE",drop:function(e){var n=e.system;l(n,t)},canDrop:function(){return!(i||o)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}})),h=Object(d.a)(m,2),j=h[0],p=j.isOver,f=j.canDrop,O=h[1],_=["map-place-wrapper"];return p&&_.push(f?"can-drop":"no-drop"),i&&_.push("locked"),o&&_.push("unavailable"),Object(Y.jsxs)("div",{className:_.join(" "),style:Qe({place:t}),ref:O,role:"button",onDoubleClick:function(){u(t)},children:[s&&Object(Y.jsx)(Xe,{player:s,contentType:r,place:t}),a&&Object(Y.jsx)(Je,{place:t,system:a,contentType:r,locked:i,unavailable:o}),!o&&Object(Y.jsx)("span",{className:"marker-dot"})]},t)},Ze=["mapPlaceData","displayType","moveTile","className","toggleLockedPlace"],et=function(e){var t=e.mapPlaceData,n=e.displayType,a=e.moveTile,c=e.className,s=void 0===c?"":c,r=e.toggleLockedPlace,l=Object(b.a)(e,Ze);return Object(Y.jsx)("div",Object($.a)(Object($.a)({className:"map-container ".concat(s)},l),{},{children:i.a.toPairs(t).map((function(e){var t=Object(d.a)(e,2),c=t[0],s=t[1],l=s.system,i=s.hs,o=s.locked,u=s.unavailable;return Object(Y.jsx)($e,{place:c,system:l,playerHome:i,locked:o,unavailable:u,contentType:n,moveTile:a,toggleLockedPlace:r},c)}))}))},tt=["systems","moveTile","displayType"],nt=function(e){var t=e.systems,n=void 0===t?[]:t,a=e.moveTile,c=e.displayType,s=(Object(b.a)(e,tt),Object(de.a)({accept:"TILE",drop:function(e){var t=e.system;a(t,null)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}})),r=Object(d.a)(s,2),l=r[0],i=(l.isOver,l.canDrop,r[1]);return Object(Y.jsxs)("div",{className:"tile-display-container",ref:i,children:[Object(Y.jsx)("div",{style:{width:"100%"},children:n.length}),n.map((function(e){return Object(Y.jsx)(Je,{system:e,contentType:c},e)}))]})},at={ADJACENT:"Adjacent",SLICE:"Slice",EQUIDISTANT:"Equidistant"},ct=function(e){var t=e.mapPlaceData,n=e.mapConfig,c=Object(a.useState)([at.SLICE]),s=Object(d.a)(c,2),r=s[0],l=s[1],o=n.players.map((function(e){var n;return e.systems=i.a.mapValues((n={},Object(Q.a)(n,at.ADJACENT,e.position.adjacent),Object(Q.a)(n,at.SLICE,i.a.uniq([].concat(Object(h.a)(e.position.adjacent),Object(h.a)(e.position.slice)))),Object(Q.a)(n,at.EQUIDISTANT,i.a.uniq([].concat(Object(h.a)(e.position.adjacent),Object(h.a)(e.position.slice),Object(h.a)(e.position.equidistant)))),n),(function(e){return function(e){var t,n={tiles:e.length},a=i.a.chain(e).map("planets").flatten().value();return n.planets=a.length,n.resources=i.a.sumBy(a,"resources"),n.influence=i.a.sumBy(a,"influence"),n.efficientValue=i.a.sumBy(a,(function(e){var t=e.resources,n=e.influence;return i.a.max([t,n])})),n.tech=i.a.sumBy(a,(function(e){return e.tech?1:0})),n.legendary=i.a.sumBy(a,(function(e){return e.legendary?1:0})),n.traits=(t={},Object(Q.a)(t,S,i.a.sumBy(a,(function(e){return e.trait===S?1:0}))),Object(Q.a)(t,I,i.a.sumBy(a,(function(e){return e.trait===I?1:0}))),Object(Q.a)(t,C,i.a.sumBy(a,(function(e){return e.trait===C?1:0}))),t),n.anomalies=i.a.sumBy(e,(function(e){return e.anomaly?1:0})),n.wormholes=i.a.sumBy(e,(function(e){return e.wormhole?1:0})),n.nonPlanet=i.a.sumBy(e,(function(e){var t=e.planets;return 0===(void 0===t?[]:t).length?1:0})),n}(i.a.uniq(e).map((function(e){return i.a.find(F,{number:i.a.get(t,"".concat(e,".system"))})})).filter((function(e){return e})))})),e}));return Object(Y.jsxs)("div",{className:"map-stats-wrapper",children:[Object(Y.jsx)("div",{children:i.a.toPairs(at).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(Y.jsxs)("div",{className:"form-check form-check-inline",children:[Object(Y.jsx)("input",{className:"form-check-input",type:"checkbox",id:"includeSystems-".concat(n),value:a,checked:r.indexOf(a)>=0,onChange:function(e){!function(e,t){l((function(n){return i.a.chain(at).values().filter((function(a){return a===e?t:n.indexOf(a)>=0})).value()}))}(a,e.target.checked)}}),Object(Y.jsx)("label",{className:"form-check-label",htmlFor:"includeSystems-".concat(n),children:a})]},a)}))}),Object(Y.jsx)("div",{className:"table-responsive",children:Object(Y.jsxs)("table",{className:"table map-stats-table",children:[Object(Y.jsx)("thead",{children:Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("th",{colSpan:"2"}),Object(Y.jsx)("th",{className:"vertical",children:Object(Y.jsx)("span",{children:"Planets"})}),Object(Y.jsx)("th",{className:"vertical",children:Object(Y.jsx)("span",{children:"Resources"})}),Object(Y.jsx)("th",{className:"vertical",children:Object(Y.jsx)("span",{children:"Influence"})}),Object(Y.jsx)("th",{className:"vertical",children:Object(Y.jsx)("span",{children:"Efficient value"})}),Object(Y.jsx)("th",{className:"vertical",children:Object(Y.jsx)("span",{children:"Legendary planets"})}),Object(Y.jsx)("th",{className:"vertical",children:Object(Y.jsx)("span",{children:"Tech specialties"})}),Object(Y.jsx)("th",{className:"vertical",children:Object(Y.jsx)("span",{children:"Cultural traits"})}),Object(Y.jsx)("th",{className:"vertical",children:Object(Y.jsx)("span",{children:"Industrial traits"})}),Object(Y.jsx)("th",{className:"vertical",children:Object(Y.jsx)("span",{children:"Hazardous traits"})}),Object(Y.jsx)("th",{className:"vertical",children:Object(Y.jsx)("span",{children:"Anomalies"})}),Object(Y.jsx)("th",{className:"vertical",children:Object(Y.jsx)("span",{children:"Wormholes"})}),Object(Y.jsx)("th",{className:"vertical",children:Object(Y.jsx)("span",{children:"No-planet systems"})})]})}),Object(Y.jsx)("tbody",{children:o.map((function(e){return Object(Y.jsx)(a.Fragment,{children:r.map((function(t,n){return Object(Y.jsxs)("tr",{className:["row-group",0===n?"row-group-first":"",n===r.length-1?"row-group-last":""].join(" "),children:[0===n&&Object(Y.jsx)("td",{rowSpan:r.length,children:e.label}),Object(Y.jsx)("td",{children:t}),Object(Y.jsx)("td",{className:"text-center",children:e.systems[t].planets||0}),Object(Y.jsx)("td",{className:"text-center",children:e.systems[t].resources||0}),Object(Y.jsx)("td",{className:"text-center",children:e.systems[t].influence||0}),Object(Y.jsx)("td",{className:"text-center",children:e.systems[t].efficientValue||0}),Object(Y.jsx)("td",{className:"text-center",children:e.systems[t].legendary||0}),Object(Y.jsx)("td",{className:"text-center",children:e.systems[t].tech||0}),Object(Y.jsx)("td",{className:"text-center",children:e.systems[t].traits[S]||0}),Object(Y.jsx)("td",{className:"text-center",children:e.systems[t].traits[I]||0}),Object(Y.jsx)("td",{className:"text-center",children:e.systems[t].traits[C]||0}),Object(Y.jsx)("td",{className:"text-center",children:e.systems[t].anomalies||0}),Object(Y.jsx)("td",{className:"text-center",children:e.systems[t].wormhole||0}),Object(Y.jsx)("td",{className:"text-center",children:e.systems[t].nonPlanet||0})]},t)}))},e.label)}))})]})})]})},st=function(e,t){var n=e._memo,a=t._memo;return i.a.isEqual(n,a)},rt=Object(a.memo)(ct,st),lt=n(244),it=n(31),ot=n(15),ut=n(16),dt=(n(431),function(e){Object(ot.a)(n,e);var t=Object(ut.a)(n);function n(){var e;return Object(j.a)(this,n),(e=t.call(this)).state={show:!1},e.transitionDelay=200,e.setShow=e.setShow.bind(Object(it.a)(e)),e.keyboardClose=e.keyboardClose.bind(Object(it.a)(e)),e.close=e.close.bind(Object(it.a)(e)),e.renderContents=e.renderContents.bind(Object(it.a)(e)),e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.show&&this.setState({show:!0}),document.addEventListener("keydown",this.keyboardClose)}},{key:"componentDidUpdate",value:function(e){e.show!==this.props.show&&this.setShow(this.props.show)}},{key:"componentWillUnmount",value:function(){this.transitionTimeout&&clearTimeout(this.transitionTimeout),document.removeEventListener("keydown",this.keyboardClose)}},{key:"setShow",value:function(e){var t=this;this.setState({show:e,transitioning:!0}),this.transitionTimeout=setTimeout((function(){t.setState({transitioning:!1})}),this.transitionDelay)}},{key:"keyboardClose",value:function(e){(this.state.show||this.props.show)&&("Escape"===e.key&&this.close())}},{key:"close",value:function(){!1!==this.props.dismissible&&this.props.onClose&&this.props.onClose()}},{key:"renderContents",value:function(){var e=this.props,t=e.custom,n=e.children,a=e.size;if(t)return Object(Y.jsx)("div",{className:"modal-custom",children:n});var c=a?"modal-".concat(a):"";return Object(Y.jsx)("div",{className:"modal-dialog ".concat(c),children:Object(Y.jsx)("div",{className:"modal-content",children:n})})}},{key:"render",value:function(){var e=this.props,t=e.portal,n=void 0===t||t,a=e.fade,c=void 0===a||a,r=(e.custom,e.className),l=void 0===r?"":r;if(!this.renderContents())return null;var i=l.split(" ");i.push("modal-wrapper"),n?i.push("modal-portal"):i.push("modal-inline"),this.state.transitioning&&i.push("modal-transitioning"),this.state.show&&i.push("modal-open");var o=[];o.push("modal"),c&&o.push("fade"),this.state.show&&o.push("show");var u=Object(Y.jsx)("div",{className:i.join(" "),children:Object(Y.jsxs)("div",{className:o.join(" "),children:[this.renderContents(),Object(Y.jsx)("div",{className:"modal-backdrop fade",onClick:this.close})]})});if(n){var d=document.getElementById("portal-modal");return d?Object(s.createPortal)(u,d):null}return u}}]),n}(a.Component));dt.CloseButton=function(e){var t=e.onClose,n=e.floating,a=Object(Y.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:t,children:Object(Y.jsx)("span",{"aria-hidden":"true",children:"\xd7"})});return n?Object(Y.jsx)("div",{className:"floating-close-button",children:a}):a},dt.Header=function(e){var t=e.children,n=e.onClose,a=e.title;return Object(Y.jsxs)("div",{className:"modal-header",children:[a&&Object(Y.jsx)("h5",{className:"modal-title",children:a}),n&&Object(Y.jsx)(dt.CloseButton,{onClose:n}),t]})},dt.Body=function(e){var t=e.children,n=e.className,a=void 0===n?"":n;return Object(Y.jsx)("div",{className:"modal-body ".concat(a),children:t})},dt.Footer=function(e){var t=e.children;return Object(Y.jsx)("div",{className:"modal-footer",children:t})};var bt=dt,mt=["show","onChange","onClose"],ht=function(e){var t=e.show,n=e.onChange,c=e.onClose,s=Object(b.a)(e,mt),r=Object(a.useState)(s.value),l=Object(d.a)(r,2),i=l[0],o=l[1];Object(a.useEffect)((function(){t&&o(s.value)}),[s.value,t]);var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=(e||"").replace(/[^\d\s]|^\s+/g,"").replace(/\s+/g," ");return t};return Object(Y.jsxs)(bt,{show:t,size:"lg",children:[Object(Y.jsx)(bt.Header,{onClose:c,title:"TTS Map string"}),Object(Y.jsx)(bt.Body,{children:Object(Y.jsx)("textarea",{className:"form-control",onChange:function(e){o(e.target.value||"")},value:i||"",onBlur:function(e){o(u(e.target.value))}})}),Object(Y.jsxs)(bt.Footer,{children:[Object(Y.jsx)("button",{className:"btn btn-outline-dark ml-1",onClick:function(){n&&n(u(i)),c&&c()},children:"Save"}),Object(Y.jsx)(lt.CopyToClipboard,{text:i,children:Object(Y.jsx)("button",{className:"btn btn-outline-primary ml-1",children:"Copy"})})]})]})},jt=(n(432),"map_data"),pt="map_option",ft=function(e){var t=i.a.mapValues(ae,(function(e,t){switch(t){case ae.MAP_00:return{system:18,locked:!0};default:return{system:null,unavailable:!0}}}));return e.players.forEach((function(e){t[e.position.hs].hs=e.label,i.a.uniq([].concat(Object(h.a)(e.position.adjacent),Object(h.a)(e.position.slice),Object(h.a)(e.position.equidistant))).forEach((function(e){delete t[e].locked,delete t[e].unavailable}))})),t},Ot=function(e){var t=i.a.chain(e).replace(/^\D+|\D+$/g,"").split(/\D+/).filter().map(i.a.parseInt).value();return i.a.chain(ae).toPairs().sortBy(0).map((function(e){var n=Object(d.a)(e,1)[0];return{place:n,system:i.a.get(t,parseInt(n.substr(-2),10))||null}})).filter((function(e){var t=e.place,n=e.system;return t&&n})).value()},_t=function(e){var t=[];return i.a.chain(e).toPairs().sortBy(0).fromPairs().mapValues((function(e){return e.system&&t.indexOf(e.system)>=0?e.system=null:t.push(e.system),e.system||delete e.system,e.locked||delete e.locked,e.unavailable||delete e.unavailable,e})).value()},vt=function(){var e,t=Object(o.f)(),n=Object(o.e)(),c=function(){var e=Object(o.f)(),t=new URLSearchParams("?".concat(e.hash.replace(/^[?#]+/,"")));return console.log({location:e,query:t}),{initialMapOption:function(){var e=t.get("o")||window.localStorage.getItem(pt);return i.a.get(le,e)?e:null}(),initialMapPlaceData:function(){if(t.get("s")){var e={};return Ot(t.get("s")).forEach((function(t){var n=t.place,a=t.system;e[n]={system:a}})),e}return ne.parseJSON(window.localStorage.getItem(jt))}()}}(),s=c.initialMapOption,r=c.initialMapPlaceData;console.log({initialMapOption:s,initialMapPlaceData:r});var l=Object(a.useState)(s||re.FOUR_PLAYER),u=Object(d.a)(l,2),b=u[0],m=u[1],j=Object(a.useState)(r||{}),p=Object(d.a)(j,2),f=p[0],O=p[1],_=Object(a.useState)(oe),v=Object(d.a)(_,2),y=v[0],x=v[1],g=Object(a.useState)(""),A=Object(d.a)(g,2),P=A[0],M=A[1],k=Object(a.useState)(!1),E=Object(d.a)(k,2),N=E[0],w=E[1];Object(a.useEffect)((function(){L(le[b]),window.localStorage.setItem(pt,b)}),[b]),Object(a.useEffect)((function(){var e;M((e=f,i.a.chain(e).toPairs().filter((function(e){return(Object(d.a)(e,1)[0]||"").match(/^MAP_/)})).sortBy(0).map((function(e){var t=Object(d.a)(e,2);return t[0],(t[1].system||"0").toString(10)})).value().join(" ").replace(/(\s+0*)+$/,""))),window.localStorage.setItem(jt,JSON.stringify(_t(f)))}),[f]),Object(a.useLayoutEffect)((function(){t.hash&&n.replace({hash:null})}));var S=(e=i.a.chain(F).map("number")).without.apply(e,Object(h.a)(i.a.chain(f).values().filter("system").map("system").value())).sort().value(),C=function(e){if(f.locked||f.unavailable)console.log("Place is locked");else{var t=[],n=i.a.clone(f);e.forEach((function(e){var a=e.system,c=e.place;if(c){if(t.indexOf(a)>=0)return;if(n[c]){if(n[c].unavailable)return;if(n[c].locked)return}}if(i.a.find(F,{number:a})){var s=i.a.get(f,"".concat(c,".system")),r=i.a.findKey(f,{system:a});r&&(n[r].system=s||null),n[c]&&(n[c].system=a),c&&t.push(a)}})),O(_t(n))}},I=function(e,t){return C([{system:e,place:t}])},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le[b],t=ft(e);i.a.chain(f).entries().value().forEach((function(e){var n=Object(d.a)(e,2),a=n[0],c=n[1],s=c.system,r=c.locked;(s||r)&&(t[a].unavailable||t[a].locked||(t[a].system=s,t[a].locked=r))})),O(t)},T=function(){return i.a.chain(f).pickBy((function(e){return e.system&&!e.locked&&!e.unavailable})).values().map((function(e){return{system:e.system,place:null}})).value()};return Object(Y.jsxs)("div",{id:"map-builder",className:"container-fluid",children:[Object(Y.jsx)("div",{className:"build-area",children:Object(Y.jsxs)(Z.a,{backend:ee.a,children:[Object(Y.jsx)(et,{mapPlaceData:f,displayType:y,moveTile:I,toggleLockedPlace:function(e){O((function(t){var n=i.a.clone(t[e]);return n.locked=!n.locked,Object($.a)(Object($.a)({},t),Object(Q.a)({},e,n))}))}}),Object(Y.jsx)(nt,{systems:S,moveTile:I,displayType:y})]})}),Object(Y.jsx)("div",{className:"config-options",children:Object(Y.jsxs)("div",{className:"form-inline mb-1",children:[Object(Y.jsx)("label",{className:"my-auto",htmlFor:"map-option-select",children:"Map setup"}),Object(Y.jsx)("select",{className:"custom-select ml-1",id:"map-option-select",onChange:function(e){m(e.target.value)},value:b,children:i.a.values(re).map((function(e){return Object(Y.jsx)("option",{value:e,children:i.a.get(le,"".concat(e,".name"))},e)}))}),Object(Y.jsxs)("select",{className:"custom-select ml-1",id:"map-option-select",onChange:function(e){x(e.target.value)},value:y,children:[Object(Y.jsx)("option",{value:oe,children:"Full colour"}),Object(Y.jsx)("option",{value:ue,children:"Lo-fi"})]}),Object(Y.jsx)("button",{className:"btn btn-outline-dark ml-1",onClick:function(){C(function(){var e,t=(e=i.a.chain(F).map("number")).without.apply(e,Object(h.a)(i.a.chain(f).values().filter((function(e){return e.locked||e.unavailable})).map("system").value())).shuffle().value();return i.a.chain(f).pickBy((function(e){return!e.locked&&!e.unavailable})).keys().map((function(e,n){return{place:e,system:t[n]||null}})).value()}())},children:"Randomise"}),Object(Y.jsx)("button",{className:"btn btn-outline-dark ml-1",onClick:function(){C(T())},children:"Clear"}),Object(Y.jsx)("button",{className:"btn btn-outline-dark ml-1",onClick:function(){w(!0)},children:"Map string"})]})}),Object(Y.jsx)("div",{className:"stat-tables",children:Object(Y.jsx)(rt,{_memo:[P,b],mapPlaceData:f,mapConfig:le[b]||{}})}),Object(Y.jsx)(ht,{show:!!N,onClose:function(){w(!1)},onChange:function(e){!function(e){var t=T(),n=Ot(e);C([].concat(Object(h.a)(t),Object(h.a)(n)))}(e)},value:P})]})},yt=(n(435),Object(u.a)()),xt=function(){return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("div",{id:"app-wrapper",children:Object(Y.jsx)(o.c,{history:yt,children:Object(Y.jsxs)(o.d,{children:[Object(Y.jsx)(o.b,{path:"/TI4/dice",component:K}),Object(Y.jsx)(o.b,{path:"/TI4/map-builder",component:vt}),Object(Y.jsx)(o.b,{path:"/",component:function(){return Object(Y.jsx)(o.a,{to:"/TI4/dice"})}})]})})}),Object(Y.jsx)("div",{id:"portal-modal"})]})};r.a.render(Object(Y.jsx)(c.a.StrictMode,{children:Object(Y.jsx)(xt,{})}),document.getElementById("root"))}},[[436,1,2]]]);
//# sourceMappingURL=main.a999fe8b.chunk.js.map