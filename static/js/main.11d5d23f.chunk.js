(this["webpackJsonpti4-reference"]=this["webpackJsonpti4-reference"]||[]).push([[0],{238:function(t,e,n){t.exports=n(379)},375:function(t,e,n){},376:function(t,e,n){},379:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),l=n(182),c=n.n(l),u=n(41),i=n.n(u),o=n(88),s=n(197),m=n(13),f=(n(199),n(198)),h=n(196),p=(n(183),n(36),n(18)),v=n(14),b=function(){function t(){Object(p.a)(this,t);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];this.dice=n.map((function(t){var e=parseFloat(t,10);return 0===e&&(e=10),e}))}return Object(v.a)(t,[{key:"format",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.textOutput=t,this}},{key:"calculate",value:function(){var t=this;this._results={},this._cumulative={};this.dice.map((function(t){return(11-t)/10}));for(var e=function(e){var n=e.toString(2).padStart(t.dice.length,"0"),a=n.replace(/0/g,"").length,r=t.dice.reduce((function(t,e,a){return t*("1"===n[a]?(11-e)/10:1-(11-e)/10)}),1);t._results[a.toString(10)]||(t._results[a.toString(10)]=0),t._results[a.toString(10)]+=r},n=0;n<Math.pow(2,this.dice.length);n+=1)e(n);for(var a=this.dice.length;a>=0;a-=1)this._cumulative[a.toString(10)]=this._results[a.toString(10)],this._cumulative[(a+1).toString(10)]?this._cumulative[a.toString(10)]+=this._cumulative[(a+1).toString(10)]:this._cumulative[a.toString(10)]=this._results[a.toString(10)];return this}},{key:"results",get:function(){if(this._results||this.calculate(),this.textOutput){var t=[];for(var e in this._results)t.push("".concat(e,": ").concat(Math.round(100*this._results[e]),"%"));return t.join("\n")}return this._results}},{key:"cumulative",get:function(){if(this._cumulative||this.calculate(),this.textOutput){var t=[];for(var e in this._cumulative)t.push(">= ".concat(e,": ").concat(Math.round(100*this._cumulative[e]),"%"));return t.join("\n")}return this._cumulative}}]),t}(),d=(n(375),"AT_LEAST"),g="EXACT",E={};function y(t,e,n){var a=t.map((function(t,a){return t+(e[a]-t)*n}));return"rgba(".concat(a.join(","),")")}var x=function(t){return t.split("").sort().join("").replace(/([0-9])(?!\1+)/g,"$& ").replace(/[^\d]+$/,"")},_=function(){var t=Object(a.useState)(d),e=Object(m.a)(t,2),n=e[0],l=e[1],c=Object(a.useState)([]),u=Object(m.a)(c,2),o=u[0],s=u[1],p=Object(a.useState)(null),v=Object(m.a)(p,2),_=v[0],S=v[1];Object(a.useEffect)((function(){s([])}),[]);var k=n===g?"exactly":"at least",j=i.a.chain(o).map("length").max().value(),O={min:1/0,max:-1/0},N=[],w=i.a.chain(o).filter().uniqBy(x).map((function(t,e){for(var a=function(t){return E[t]||(E[t]=Object(f.a)(b,Object(h.a)(t.split(""))).calculate()),E[t]}(t)[n===g?"results":"cumulative"],r=[],l=n===g?0:1;l<=j;l+=1){var c=a[l.toString(10)];c>O.max&&(O.max=c),c<O.min&&(O.min=c),r.push(c),0===e&&N.push(l)}return{key:e,dice:t,cols:r}})).value();return r.a.createElement("div",{className:"container dice-table my-2"},r.a.createElement("h1",null,"Hit probabilities"),r.a.createElement("p",null,'Enter combat values below to see the probability of producing different numbers of hits (enter 0 for 10). Click "Add dice" to get started.'),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var e=t.target.querySelector("input:focus");e&&e.blur(),s(o.filter((function(t){return!!t.replace(/[^\d]/g,"")})))},className:"d-flex flex-wrap mt-2 mb-2"},o.map((function(t,e){return r.a.createElement("div",{key:e,className:"dice-input input-group input-group-sm flex-nowrap flex-grow-0 flex-shrink-1 mb-0-5 mr-0-5 w-auto"},r.a.createElement("input",{type:"text",inputMode:"numeric",className:"form-control flex-grow-0 flex-shrink-0",value:t,placeholder:"...",style:{width:"".concat(.6*Math.max(3,t.length)+1.35,"em")},autoFocus:e===_,onChange:function(t){var n=i.a.clone(o);n[e]=t.target.value.replace(/[^\d]/g,""),s(n)},onBlur:function(){S(null)},onFocus:function(){S(e)}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-sm btn-outline-dark",type:"button",tabIndex:"-1",onClick:function(){var t=i.a.clone(o);t.splice(e,1),s(t)}},"\xd7")))})),r.a.createElement("button",{className:"btn btn-sm btn-secondary mb-0-5",type:"button",onClick:function(){var t=i.a.clone(o);t.push(""),s(t),S(t.length-1)}},"+ Add values"),r.a.createElement("input",{type:"submit",style:{position:"fixed",left:"100%",top:"-100%"}})),null!==_&&0===o.filter((function(t){return t})).length&&r.a.createElement("p",{class:"mt-n2 text-muted"},r.a.createElement("small",null,'Combat values, eg "',r.a.createElement("u",null,"688"),'"')),w.length>0?r.a.createElement("div",{className:"results-table"},r.a.createElement("p",null,r.a.createElement("strong",null,"Probability of ",r.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),l(n===d?g:d)}},k)," X hits")),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"}),N.map((function(t){return r.a.createElement("th",{scope:"col",className:"text-center",key:t},t)})))),r.a.createElement("tbody",null,w.map((function(t,e){var n=t.dice,a=t.cols;return r.a.createElement("tr",{key:x(n)},r.a.createElement("th",{scope:"col"},x(n)),a.map((function(t,e){return r.a.createElement("td",{key:e,className:"text-center",style:{backgroundColor:"number"===typeof t?y([20,20,50],[255,40,220],(t-O.min)/(O.max-O.min)):"transparent"}},function(t){if(void 0===t)return"-";var e=Math.round(100*t);return 100===e&&(t<1&&(e=">99"),t>1&&(e="100")),"".concat(e,"%")}(t))})))})))))):null)},S=(n(376),Object(s.a)()),k=function(){return r.a.createElement(o.b,{history:S},r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/",component:_})))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root"))}},[[238,1,2]]]);
//# sourceMappingURL=main.11d5d23f.chunk.js.map